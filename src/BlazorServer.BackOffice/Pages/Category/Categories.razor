@page "/category"
@using BlazorServer.BackOffice.Models;
@attribute [Authorize]
@inherits CategoriesBase


<MudDataGrid T="CategoryModel" Items="Categories" ReadOnly="false" EditMode="@DataGridEditMode.Form" FormFieldChanged="@FormFieldChanged" CommittedItemChanges="@CommittedItemChanges" EditTrigger="@DataGridEditTrigger.Manual" SortMode="SortMode.None" Elevation="10" Class="rounded-lg" QuickFilter="new Func<CategoryModel,bool>(FilterFunc)">
    <ToolBarContent>
        <MudIcon Class="mr-2" Icon="@Icons.Material.TwoTone.Kitchen" Color="Color.Inherit" />
        <MudText Typo="Typo.h6">Résultats de recherche</MudText>
        <MudSpacer />
        <MudTextField @bind-Value="searchString" Variant="Variant.Text" Placeholder="Rechercher une catégorie" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" Class="mt-0 mr-3 mb-2"></MudTextField>
    </ToolBarContent>
    <Columns>
        <PropertyColumn Property="x => x.Name" Title="Nom" />
        <PropertyColumn IsEditable="false" Property="x => x.NumberArticles" Title="Nombre d'articles">
            <EditTemplate></EditTemplate>
        </PropertyColumn>
        <TemplateColumn CellClass="d-flex justify-end">
            <CellTemplate>
                <MudMenu Icon="@Icons.Material.Filled.MoreVert">
                    <MudMenuItem OnClick="@context.Actions.StartEditingItemAsync">Modifier</MudMenuItem>
                    <MudMenuItem OnClick="@(() => DeleteCategory(@context.Item.Id))">Supprimer</MudMenuItem>
                </MudMenu>
            </CellTemplate>
        </TemplateColumn>
    </Columns>
</MudDataGrid>

